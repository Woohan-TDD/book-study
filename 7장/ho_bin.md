# Chapter 7. 도메인 서비스

> 여러 애그리거트가 사용될 때 도메인 서비스를 만들어 응용 서비스에서 호출하자

- 도메인 서비스를 이용해서 여러 애그리거트, 여러 도메인 로직을 사용할 수 있다.
    - 예를 들어, 총 결제 금액을 계산할 때, 회원 등급에 따라 추가 할인, 할인 쿠폰 적용을 한다면 결제 애그리거트 뿐 아니라 회원 애그리거트, 쿠폰 애그리거트 등이 필요하다
    - 이럴 때 결제서비스(도메인 서비스)를 별도로 구현해 필요한 애그리거트를 전달받는다.
- 도메인 서비스가 애그리거트에 의존해야지, 애그리거트가 도메인서비스에 의존하면 안된다.
    - 애그리거트의 필드는 해당 데이터에 관련이 있어야 하는데 도메인 서비스는 관련이 없다.
- 트랜잭션이 필요한 행동은 응용서비스에서 하도록 함
- 어떤 기능이 응용 서비스인지 도메인 서비스인지 헷갈린다면
    - 해당 로직이 애그리거트의 상태를 변경하면 → 도메인 서비스
    - 해당 로직이 애그리거트를 호출하고 사용하기만 한다면 → 응용서비스
- 도메인 서비스의 패키지는 도메인 영역에 위치한다.
    - 응용 서비스가 도메인 영역에 있는 도메인 서비스, 애그리거트, 레포지토리를 호출해서 사용하기만 한다.
- infra라면 인터페이스를 도메인 영역에 두고 구현체를 infra 패키지에 넣어줄 수 있다
